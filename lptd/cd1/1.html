<!-- (\w+)\s+(\w+)\s+(.+) -->
<!-- {word: "$1", types: "$2", mean: "$3"}, -->

<!DOCTYPE html>
<html>
<head>
  <title>LPTD 1</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-sanitize.js"></script>

  <script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
</head>


<body ng-app="myApp">
    <div ng-controller="ctrl" class="container mt-4">
    <div ng-include="'../in1.html'"></div>
    <h4 class="mb-4">Listening Practice Through Dictation</h4>
    	<a href="../../index.html" class="mt-2">3000 Words</a>
    	<button class="btn btn-sm btn-info float-right" ng-click="bEngToVi = !bEngToVi">{{bEngToVi == 1 ? 'en->vi' : 'vi->en' }}</button>
    	
    	<div class="my-3">
    		<button class="btn btn-sm btn-info" ng-if="storyIdx > 0" ng-click="fetchStory(-1)">Prev. Story</button>
    		<button class="btn btn-sm btn-info" ng-if="storyIdx < (stories.length - 1)" ng-click="fetchStory(1)">Next Story</button>
    		<button class="btn btn-sm btn-info mr-2" ng-click="playFullSound($index)">{{bPlayingFull ? (bPause ? 'Resume' : 'Pause') : 'Play'}}</button>
	        <button class="btn btn-sm btn-info" ng-if="bPlayingFull" ng-click="stopSound()">Stop</button>
    	</div>

		<div class="card mt-4">
		    <div class="card-body">
	          <div class="card-text my-2">
	          	<p ng-repeat="(index, sentence) in story.engs" ng-if="bEngToVi" ng-click="playSentence(index)">{{sentence}}</p>
	          	<p ng-bind-html="story.vi" ng-if="!bEngToVi"></p>
	          	<div class="mt-5"  ng-if="story.voca">
	          		<hr/>
	          		<p ng-bind-html="story.voca"></p>
	          	</div>
	          	
	          </div> <!-- card-text -->
        	</div> 		<!-- card-body -->
		 </div> <!-- card -->
    </div> <!-- container -->
</body>

<script type="text/javascript">
    var app = angular.module("myApp", ['ngSanitize']);
    app.controller("ctrl", function($scope, $timeout) {

     $scope.storyIdx = 0;
     $scope.bPlayingSentence = false;
     $scope.bPlayingFull = false;
     $scope.bPause = false;
     $scope.bEngToVi = 1;
     $scope.audio;
     $scope.currentTime = 0;

    $scope.stories = [
{
	engs: 
	[
	"1.1 The Lion and the Rabbit",
	"A ………….. lion lived in the forest. Every day, he killed and ate a …………..of animals. The other animals were …………..the lion would kill them all.",
	"The animals told the lion, “ Let’s make a deal. If you …………..to eat only one animal each day, then one of us will come to you every day. Then you don’t have to …………..and kill us.”",
	"The plan sounded well thought-out to the lion, so he ………….., but he also said, “If you don’t come every day, I …………..to kill all of you the next day!”",
	"Each day after that, one animal went to the lion so that the lion could eat it. Then, all the other animals were …………...",
	"………….., it was the rabbit’s turn to go to the lion. The rabbit went very slowly that day, so the lion was …………..when the rabbit ﬁnally …………...",
	"The lion angrily asked the rabbit, “ Why are you late?”",
	"“I was …………..from another lion in the forest. That lion said he was the king, so I was afraid.”",
	"The lion told the rabbit, “ I am the only king here! Take me to that other lion, and I will kill him.",
	"The rabbit ………….., “ I will be happy to show you where he lives.”",
	"The rabbit led the lion to an old well in the ………….. of the forest. The well was very deep with water at the …………... The rabbit told the lion, “ Look in there. The lion lives at the bottom.”",
	"When the lion looked in the well, he could see his own face in-the water. He thought that was the other lion.",
	"Without waiting another ………….., the lion jumped into the well to …………..the other lion. He never came out.",
	"All of the other animal in the forest-were very pleased with the rabbit’s clever trick."
	],
	vi: 
	'1.1 SƯ TỬ VÀ THỎ<p></p>Một con Sư Tử <b>cruel</b> sống trong rừng. Hằng ngày, nó giết và ăn rất <b>lot</b> loài vật. Muông thú <b>afraid</b> rằng Sư Tử sẽ giết là ăn thịt tất cả loài vật trong khu rừng.<p></p> Chúng nói với Sư Tử rằng: "Chúng ta hãy thỏa thuận. Nếu ngày <b>promise</b> rằng mỗi ngày ngài chỉ ăn một con vật, thì hàng ngày một trong số chúng tôi sẽ tới đây nộp mạng. Ngài sẽ không phải <b>hunt</b> và giết chúng tôi nữa". <p></p> Sư Tử thấy thỏa thuận nghe rất <b>well</b> nên nó đã <b>agreed</b>, nhưng nó cũng nói rằng: "Nếu mỗi ngày không có một đứa tới nạp mạng, tao <b>promise</b> sẽ giết tất cả chúng mày vào ngày hôm sau!".<p></p> Cứ như vậy, mỗi ngày một con vật lại tới nộp mạng cho Sư Tử. Và như thế, tất cả muôn loài đề <b>safe</b>.<p></p> <b>Finally</b>, đến lượt Thỏ tới nộp mạng cho Sư Tử. Thỏ hôm đó tới rất muộn nên Sư Tử đã rất <b>angry</b> khi thỏ <b>arrived</b>.<p></p> Sư Tử tức giận hỏi Thỏ: "Tại sao mày lại tới muộn?"<p></p> "Tôi đã <b>hiding</b> khỏi một con Sư Tử khác trong rừng. Con Sư Tử đó là chúa sơn lâm, nên tôi rất sợ hãi".<p></p> "Tao là chúa sơn lâm duy nhất trong khu rừng này. Đưa tao tới gặp con Sư Tử đó, tao sẽ giết chết nó" - Sư Tử nói với Thỏ.<p></p> Thỏ <b>replied</b>: "Tôi rất vui mừng chỉ cho ngài nơi hắn sống".<p></p> Thỏ đưa Sư thử tới một chiếc giếng cũ ở <b>middle</b> khu rừng. Chiếc giếng sâu hun hút và có nước ở <b>bottom</b>. Thỏ nói với Sư Tử: "Ngài hãy nhìn vào trong này. Hắn sống ở dưới đáy kia kìa". Khi Sư Tử nhìn xuống đấy giếng, nó thấy chính khuôn mặt mình in trên mặt nước. Nó nghĩ đó là con Sư Tử kia. Không đợi một <b>moment</b> nào, Sư Tử nhảy xuống giếng để <b>attack</b> con Sư Tử kia. Nó không bao giờ có thể thoát ra được nữa.<p></p> Tất cả các loài vật trong rừng đều rất <b>pleased</b> với <b>clever trick</b> của Thỏ.',
	voca:
	'Cruel (Tính từ): Hung Bạo<p></p>Lot (Phó từ): Nhiều<p></p>Afraid (Tính từ): Sợ Hãi<p></p>Promise (Động từ): Hứa<p></p>Hunt (Động từ): Săn bắt<p></p>Well (Trạng từ): Ổn, Tốt<p></p>Agree(Động từ): Đồng ý<p></p>Safe (Tính từ): An toàn<p></p>Finally (Phó từ): Cuối cùng<p></p>Angry (Tính từ): Bực tức, tức giận<p></p>Arrive (Động từ): Đến nơi<p></p>Hide (Động từ): Trốn<p></p>Reply (Động từ): Trả lời<p></p>Middle (Giới từ): Giữa<p></p>Bottom (Giới từ): Dưới đáy<p></p>Moment (Danh từ): Khoảnh khắc<p></p>Attack (Động từ): Tấn công<p></p>Pleased (Tính từ): Vui lòng<p></p>Clever (Tính từ): Thông minh<p></p>Trick (Danh từ): Mẹo'
},
{
	engs: 
	[
	"1.2 THE LABORATORY",
	"Mia's father had a ...................., but she had no idea what was in it. Her dad always closed and locked the door when he went in. She knew that he used it to do .................... for work. He never told Mia what the project where.",
	"One night, Mia .................... the door to the laboratory. She stopped and thought, 'I wonder what crazy ..................... he is doing now.' Suddenly, she heard a ................... ................... It sounded like an .................. ..................The noise .................... her, so she walked quickly back to her room.",
	"The next night, her friend Liz came to her house. When Liz arrived, Mia told about the night before. 'Oh, It was .....................', She said.",
	"'Why don't we see what is in there?' Liz asked. 'It will be a fun ....................!' Mia felt ..................... about going into her father's laboratory, but she agreed. As always, the door was locked. The waited until Mia's father left the laboratory to eat dinner. 'He didn't lock the door!' Liz said. Let's go.",
	"The laboratory was dark. The girls walked down the stairs .................... Mia .................... strange .................... What terrible thing was her father ....................?",
	"Suddenly, they heard an evil laugh. It was even ....... than the one MIa heard the night before. What if a monster was going to .................... them? Mia had to do something. She.................... for help.",
	"Mia's father ran into the room and turned on the lights. 'Oh, no', he said. 'You must have learned my ....................'",
	"'Your monster tried to kill us', Mia said. 'Monster?' he asked. 'You mean this?' He had a pretty doll in his hands. The doll laughed. The laugh didn't sound so evil anymoe. 'I made this for your birthday. I wanted to give it to your then, but you can have it now. I hope you like it!'",
	],
	vi: 
	'1.2 PHÒNG THÍ NGHIỆM<p></p> Ba của Mia có một cái <b>laboratory</b>, nhưng cô bé không hề biết có thứ gì ở trong đó. Ba luôn luôn đóng và khóa chửa khi ông vào trong phòng thì nghiệm. Cô bé biết ông dùng nó để làm <b>projects</b> cho công việc. Nhung ba chưa bao giờ nói cho Mia biết những dự án đó là gì.<p></p> Một đêm, Mia <b>approached</b> cửa phòng thí nghiệm. Cô bé dừng lại và nghĩ. "Mình tự hỏi rằng cha đang làm <b>experiment</b> điên cuồng gì bay giờ nhỉ". Bỗng nhiên, cô bé nghe thấy một <b>loud noise</b>. Âm thanh đó nghe như là <b>evil laugh</b>. Tiếng ồn đó làm cô bé <b>scared</b> nên Mia vội vã quay trở lại phòng mình.<p></p> Đêm hôm sau, Liz - bạn của Mia tới chơi. Khi Liz tới, Mia kể cho cô bé nghe về chuyển xảy ra vào tối hôm trước. "Ôi, điều đó thật <b>terrible</b>" - Liz thốt lên.<p></p> "Tại sao chúng mình không nhìn xem có gì trong đó?" - Liz hỏi. "Đấy sẽ là một <b>adventure</b> thú vị!".<p></p> Mia cảm thấy <b>nervous</b> về chuyện bước vào phòng thí nghiệm của bố, nhưng cuối cùng cô bé đã đồng ý với Liz. Như mọi lần, cánh cửa lại bị khóa. Liz và Mia đợi tới khi ba của Mia rời khỏi phòng thì nghiệm để ăn tối. "Ba cậu không khóa cửa kìa" - Liz nói. "Bọn mình đi thôi".<p></p> Phòng thí nghiệm tối om. Hai cô bé bước xuống cầu thang thật <b>carefully</b>. Mia <b>smelled</b> những <b>chemicals</b> rất lạ lẫm. Đó có phải là những thứ khủng khiếp mà ba đã từng <b>creating</b> không?<p></p> Bất chợt, hai cô bé nghe thấy tiếng cười rùng rợn. Thậm chí lần này âm thành còn <b>worse</b> hơn cả đêm hôm trước. Nếu như có một con quái vật nhảy ra và <b>kill</b> hai cô bé thì sao? Mia nghĩ mình phải làm gì đó. Cô bé <b>shouted</b> tìm kiếm sự giúp đỡ.<p></p> Ba của Mia chạy vào phòng và bật đèn lên. "Ôi, không" - ông nói. "Con hẳn đã biết <b>secret</b> của ba rồi".<p></p> "Con quái vật của ba đang cố giết tụi con" - Mia nói.<p></p> "Quái vật?" - ông hỏi. "Ý con là cái này phải không?". Ông cầm một con búp bê xinh xắn trên tay. Con búp bê cười. Tiếng cười không còn rùng rợn nữa. "Bố làm để tặng con ngày sinh nhật. Bố muốn tới ngày đó mới tặng cho con, nhưng con có thể nhận nó ngay bây giờ. Bố hi vọng là con thích nó. Mia".',
	voca:
	'Laboratory (Danh từ): Phòng thì nghiệm<p></p> Project (Danh từ): Dự án<p></p> Approach (Động từ): Đến gần	<p></p> Experiment (Danh Từ): Thí nghiệm<p></p> Loud (Tính từ): Ồn	<p></p> Noise (Danh từ): Tiếng<p></p> Evil (Tính từ): Ma quái	<p></p> Laugh (n,v): (Tiếng) cười<p></p> Scare (Động từ): Làm hoảng sợ	<p></p> Terrible (Tính từ): Tệ hại<p></p> Adventure (Danh từ): Chuyến phiêu lưu	<p></p> Nervous (Tính từ): Lo lắng<p></p> Carefully (Trạng từ): Một cách cẩn thận	<p></p> Smell (Động từ): Ngửi thấy<p></p> Chemical (Danh từ): Chất hóa học	<p></p> Worse (Tính từ so sánh): Tệ hơn<p></p> Shout (Động từ): Kêu gào	<p></p>'
},
{
	engs:
	[
	"1.3 THE REPORT",
"Lee sat ........... the books at the ........... and thougth about his group project.",
"They had to turn it in soon, but he hadn't even started his part! Jack and Claire were in his group.",
"They had worked hard. They were also very smart, and Lee didn't want them to get a bad ...........",
"Jack did the ........... He wrote a lot of very good sentences and ........... things with great adjectives. Claire drew a nice map of the stars. Now, Lee needed to do his part of the project.",
"'Well, I ........... I need to start my model'. Lee thought.",
"Making a model of a ........... was really hard. Lee tried to read ........... books, but he couldn't ........... any of the ........... 'I wish I could see a planet, ........... of having to read about it!'",
"..........., there was a bright light. Lee was pulled from his chair, though the roof, and right into a strage ship! 'Hello, kid', said an ........... 'Did you ask for help?'",
"Lee told the ........... alien all about his project. The alien agreed to help Lee ........... his problem. 'First, we'll fly through space to ........... the ........... Then, I can help you make a model of my planet.'",
"Soon, they were going through the ........... They passed the moon. Then they viewed Mars. Lee was very excited. Instead of a bad grade, his group would have the best project ...........!",
"_'It's time to go home', _the alien finally said. On the way back, he helped Lee make a model of the planet Mars. Soon, they were on Earth.",
"'Thanks', Lee said. 'My model will be awesome!' Then he took his model and said goodbye to his new friend.",
],

vi:'1.3 BẢN BÁO CÁO<p></p>Lee ngồi <b>among</b> những cuốn sách ở <b>library</b> và nghĩ về bài tập về nhà của cả nhóm.<p></p> Họ cần phải nộp bài sớm, nhưng Lee thậm chí còn chưa bắt đầu làm phần bài tập của cậu ấy! Jack và Claire cùng nhóm với Lee.<p></p> Họ đã làm bài tập rất chăm chỉ. Họ cũng là những người rất thông minh, Lee không muốn họ bị <b>grade</b> kém.<p></p><p></p>Jack làm <b>report</b>. Cậu đã viết rất nhiều câu từ hoa mỹ và <b>described</b> bản báo cáo với những tính từ rất tuyệt vời. Claire đã vẽ một bản đồ những ngôi sao rất đẹp. Giờ thì, Lee cần phải hoàn thành phần bài của cậu ấy.<p></p><p></p>"Ồ, mình <b>suppose</b> mình cần phải bắt đầu làm mẫu vật của mình thôi", Lee nghĩ.<p></p><p></p>Làm mẫu vật của một <b>planet</b> rất là khó. Lee cố gắng độc <b>several</b> quyển sách, nhưng cậu cũng không thể <b>comprehend</b> bất kỳ một cái <b>charts</b> nào. "Cả nhóm sẽ <b>fail</b> bời vì mình mất thôi" - Lee buồn bã nói. Cậu gục đầu xuống bàn và nói, "Ước gì mình có thể nhìn thấy một hành tinh thực sự, instead việc đọc về nó!".<p></p><p></p><b>Suddenly</b>, có một tia sáng chói lòa. Lee bị kéo ra khỏi ghế, băng qua nóc nhà, bay thằng vào trong một chiếc phi thuyền lạ! "Chào cậu bé", <b>Alien</b> nói. "Có phải cậu cầu giúp đỡ không?"<p></p><p></p>Lee nói với người ngoài hành tinh <b>friendly</b> kia về bài tập. Người ngoài hành tinh đồng ý giúp Lee <b>solve</b> vấn đề của cậu. "Đầu tiên, chúng ta sẽ bay qua không gian để <b>view the universe</b>. Sau đó, tôi sẽ giúp cậu làm mẫu vật hành tinh của tôi".<p></p><p></p>Lập tức, họ bay qua những <b>clounds</b>. Họ băng qua mặt trăng rồi họ nhìn thấy Sao Hỏa. Lee rất háo hức. Thay vì phải nhận điểm kém, nhóm của cậu sẽ có một bài tập về nhà hoàn hảo nhất <b>ever</b>!<p></p><p></p>"Đến giờ phải về rồi", người ngoài hành tinh nói. Trên đường về nhà, ông giúp Lee làm mẫu vật Sao Hỏa. Chẳng bao lâu họ đã về tới Trái Đất.<p></p><p></p>"Cảm ơn ông" - Lee nói. "Mẫu vật của cháu chắc chắn sẽ rất tuyệt cho coi". Sau đó cậu bé lấy mẫu vật và tạm biệt người bạn mới của mình.',
voca: 'Among (Trạng từ): Ở giữa<p></p>Library (Danh từ): Thư viện<p></p>Grade (Danh từ): Thứ hạng<p></p>Report (Danh từ): Báo cáo<p></p>Suppose (Động từ): Nghĩ rằng<p></p>Planet (Danh từ): Hành tinh<p></p>Serveral (Tính từ): Một vài<p></p>Comprehend (Động từ): Hiểu<p></p>Chart (Danh từ): Biểu đồ<p></p>Fail: Thất bại<p></p>Instead (Phó từ): Thay vì<p></p>Suddenly (Trạng từ): Đột nhiên<p></p>Alien (Danh từ): Người ngoài hành tinh<p></p>Friendly (Tính từ): Thân thiện<p></p>Solve (Động từ): Giải quyết<p></p>View (Động từ): Xem, chiêm ngưỡng<p></p>Universe (Danh từ): Vũ trụ<p></p>Clound (Danh từ): Mây<p></p>Ever (Phó từ): Từ trước đến nay<p></p>Describe (Động từ): Mô tả'
}

	   ];


    $scope.story = $scope.stories[$scope.storyIdx];

	$scope.fetchStory = function (index) {
		$scope.stopSound();
		$scope.storyIdx = $scope.storyIdx + index;
		$scope.story = $scope.stories[$scope.storyIdx];
	}

	$scope.playSentence = function (index) {
		$scope.stopSound();
  		$scope.audio = new Audio("truyenchem/" + $scope.storyIdx + "/" + $scope.storyIdx + '.' + index + '.mp3');
	    $scope.audio.loop = false;
	    $scope.audio.play();
	    $scope.bPlayingSentence = true;
	}

	$scope.playFullSound = function (index) {
		if ($scope.bPlayingSentence)
		{
			$scope.stopSound();
		}

		if ($scope.bPlayingFull)
		{
			$scope.pauseSound();
		}
	  	else
	  	{
	  		$scope.audio = new Audio("truyenchem/" + $scope.storyIdx + "/" + $scope.storyIdx + '.full.mp3');
		    $scope.audio.loop = false;
		    $scope.audio.play();
	  	}
	    $scope.bPlayingFull = true;
	}

	$scope.pauseSound = function () {
		if (!$scope.audio) return;
		$scope.bPause = !$scope.bPause;
		if ($scope.bPause)
	    {
	    	$scope.audio.pause();
	    	$scope.currentTime = $scope.audio.currentTime;
	    }
	    else
	    {
	    	$scope.audio.currentTime = $scope.currentTime;
	    	$scope.audio.play();
	    }
	}

	$scope.stopSound = function () {
		if (!$scope.audio) return;
		 $scope.audio.pause();
		 $scope.audio.currentTime = 0;
		 $scope.currentTime = 0;
		 $scope.bPlayingFull = false;
		 $scope.bPlayingSentence = false;
	};

    });

</script>
</html>
