<!-- (<br>\w+)<br>\s+(<br>\w+)<br>\s+(.+) -->
<!-- {word: "$1", types: "$2", mean: "$3"}, -->

<!DOCTYPE html>
<html>
<head>
  <title>LPTD 1</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-sanitize.js"></script>

  <script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
</head>


<body ng-app="myApp">
    <div ng-controller="ctrl" class="container mt-4">
    <h4 class="mb-4">Listening Practice Through Dictation CD1</h4>
    	<a href="../../index.html" class="mt-2"><< 3000 Words</a>
    	<div class="my-3">
		    <a ng-repeat="n in range(1,40)" ng-click="fetchStory(n);"  href=""> {{n}} &nbsp|</a>
		    <br> <label> <input class="my-3" type="checkbox" ng-click="isAudioLoop=!isAudioLoop">&nbspAudio loop</label>

		 </div>

    	<button class="btn btn-sm btn-info mr-4" ng-click="playFullSound($index)">{{bPlayingFull ? 'Stop' : 'Play'}}</button>
    	<button class="btn btn-sm btn-info mr-4" ng-click="pauseSound()" ng-if="bPlayingFull">{{bPause ? 'Resume' : 'Pause'}}</button>

    	  <button class="btn btn-sm btn-info float-right" ng-click="bEngToVi = !bEngToVi">{{bEngToVi == 0 ? 'en->vi' : 'vi->en' }}</button>

		<div class="card mt-4">
		    <div class="card-body">
	          <div class="card-text my-2">
	          	<!-- <p ng-repeat="(index, sentence) in story.en" ng-if="bEngToVi" ng-click="playSentence(index)">{{sentence}}</p> -->
	          	<p ng-bind-html="story.en" ng-if="!bEngToVi"></p>
	          	<p ng-bind-html="story.vi" ng-if="bEngToVi"></p>
	        <!--   	
	        	<div class="mt-5"  ng-if="story.voca">
	          		<hr/>
	          		<p ng-bind-html="story.voca"></p>
	          	</div>
	          	 -->
	          	
	          </div> <!-- card-text -->
        	</div> 		<!-- card-body -->
		 </div> <!-- card -->
    </div> <!-- container -->
</body>

<script type="text/javascript">
    var app = angular.module("myApp", ['ngSanitize']);
    app.controller("ctrl", function($scope, $timeout) {

    $scope.range = function(min, max, step) {
	    step = step || 1;
	    var input = [];
	    for (var i = min; i <= max; i += step) {
	        input.push(i);
	    }
	    return input;
	};

     $scope.storyIdx = 0;
     $scope.bPlayingSentence = false;

     $scope.bPlayingFull = false;
     $scope.bPause = false;
     $scope.bEngToVi = 0;
     $scope.audio;
     $scope.currentTime = 0;
     $scope.isAudioLoop = false;

    $scope.stories = [
{
	en: 
	'<b>Unit 1: A Picnic by the River </b><br>\
	W: This is a good spot. Let’s stop and have our picnic <br>\
	next to the river. <br>\
	M: Good idea. Walking always makes me hungry.<br>\
	I’m ready for lunch.<br>\
	W: We can sit here on the grass. Oh no! Someone <br>\
	forgot to throw these empty paper bags away.<br>\
	There is litter everywhere!<br>\
	M: Why do people always leave litter around? It’s<br>\
	not a nice thing to do. It spoils other people’s<br>\
	picnics.<br>\
	W: I think they are lazy. Or maybe they just don’t<br>\
	care. Look, there are some empty cans and glass<br>\
	bottles under that tree, too. <br>\
	M: People should clean up before they leave, and <br>\
	not leave litter lying around. <br>\
	W: That’s right. Well, after our picnic, let’s pick up<br>\
	all the litter we can and take it out of here.<br>\
	M: OK! And next week, let’s come back with<br>\
	friends and pick up some more.<br>\
	W: Good idea!',
	vi: 
	'<b>Unit 1: Dã ngoại bên bờ sông</b><br>\
	W: Đây là một địa điểm tốt. Chúng ta hãy dừng lại và dã ngoại<br>\
	bên bờ sông.<br>\
	M: Ý tưởng hay. Đi bộ luôn khiến tôi đói.<br>\
	Tôi đã sẵn sàng cho bữa trưa.<br>\
	W: Chúng ta có thể ngồi đây trên bãi cỏ. Ôi không! Có người<br>\
	quên vứt những chiếc túi giấy rỗng này đi.<br>\
	Rác ở khắp mọi nơi!<br>\
	M: Tại sao mọi người luôn vứt rác khắp nơi?<br>\
	Đó không phải là một điều tốt đẹp. Nó làm hỏng buổi dã ngoại<br>\
	của người khác.<br>\
	W: Tôi nghĩ họ lười biếng. Hoặc có thể họ chỉ<br>\
	không quan tâm. Nhìn kìa, có một số lon rỗng và chai thủy tinh<br>\
	dưới gốc cây đó nữa.<br>\
	M: Mọi người nên dọn dẹp trước khi rời đi, và<br>\
	không để rác nằm xung quanh.<br>\
	W: Đúng vậy. Vâng, sau buổi dã ngoại của chúng ta, chúng ta hãy nhặt<br>\
	hết rác có thể và mang chúng ra khỏi đây.<br>\
	M: Được! Và tuần tới, chúng ta hãy quay lại với<br>\
	bạn bè và nhặt thêm một số.<br>\
	W: Ý tưởng hay!',
	voca:
	''
},
{
	en: 
	'<b>Unit 2: Let’s Recycle!</b><br>\
	M: Hi, Jane! Have you heard about the new laws to<br>\
	help people recycle?<br>\
	W: I heard about them on the news last night. I<br>\
	don’t think I like them.<br>\
	M: The government wants to keep the environment<br>\
	clean by recycling paper, metal, and glass<br>\
	instead of throwing these things away. <br>\
	W: But who wants to pay an extra 50 cents each<br>\
	time you buy a cup of coffee? That’s a lot of<br>\
	money!<br>\
	M: 50 cents? It’s only five cents extra for a paper<br>\
	cup. <br>\
	W: I thought it was 50 cents! <br>\
	M: No, it’s only five cents. Don’t worry. And you<br>\
	can get your money back when you return the<br>\
	cup. <br>\
	W: That’s fair. Well, maybe the government is right,<br>\
	after all. I’ll return all the paper coffee cups I use<br>\
	from now on.<br>\
	M: Good! We all need to recycle. It helps to keep<br>\
	the environment clean<br>',
	vi: 
	'<b>Unit 2: Hãy tái chế!</b><br>\
	M: Chào Jane! Bạn đã nghe về luật mới để<br>\
	giúp mọi người tái chế chưa?<br>\
	W: Tôi nghe về chúng trên bản tin tối qua. Tôi<br>\
	không nghĩ là tôi thích chúng.<br>\
	M: Chính phủ muốn giữ cho môi trường<br>\
	sạch sẽ bằng cách tái chế giấy, kim loại và thủy tinh<br>\
	thay vì vứt những thứ này đi.<br>\
	W: Nhưng ai muốn trả thêm 50 xu mỗi lần<br>\
	mua một cốc cà phê? Thật là nhiều<br>\
	tiền!<br>\
	M: 50 xu? Chỉ mất thêm năm xu cho một cốc<br>\
	giấy.<br>\
	W: Tôi nghĩ là 50 xu!<br>\
	M: Không, chỉ năm xu thôi. Đừng lo. Và bạn<br>\
	có thể lấy lại tiền khi trả lại<br>\
	cốc.<br>\
	W: Công bằng mà. Vâng, có lẽ chính phủ đúng,<br>\
	sau cùng. Tôi sẽ trả lại tất cả các cốc cà phê giấy mà tôi sử dụng<br>\
	từ bây giờ.<br>\
	M: Tốt! Tất cả chúng ta đều cần tái chế. Điều đó giúp giữ cho<br>\
	môi trường sạch sẽ',
	voca:
	''
},
{
	en:
	'<b>Unit 3: Growing Roses</b><br>\
	M: Excuse me, ma’am. I have a problem with my<br>\
	rose bush. It used to produce a lot of pink roses.<br>\
	But now it doesn’t produce any flowers at all.<br>\
	W: I see. That does seem like a problem. Do the<br>\
	leaves on the plant look healthy? <br>\
	M: Not really. The leaves used to be very green.<br>\
	Now, most of them have turned brown.<br>\
	W: Well, I think your rose bush needs some fertilizer.<br>\
	M: OK. What sort of fertilizer do you think I should<br>\
	use? <br>\
	W: This liquid fertilizer is very good. It will help<br>\
	make your rose leaves green again. Then the<br>\
	plant should produce roses quite soon. The<br>\
	fertilizer costs about ten dollars.<br>\
	M: How long will it take for my rose bush to recover?<br>\
	W: About two weeks, I think. <br>\
	M: Great. I’ll take it. Thank you so much for your<br>\
	help.<br>\
	W: You’re welcome!',

	vi:
	'<b>Unit 3: Trồng hoa hồng</b><br>\
	M: Xin lỗi, thưa bà. Tôi có vấn đề với<br>\
	cây hoa hồng của tôi. Trước đây nó từng ra rất nhiều hoa hồng màu hồng.<br>\
	Nhưng bây giờ nó không ra hoa nữa.<br>\
	W: Tôi hiểu rồi. Có vẻ như đó là vấn đề.<br>\
	Lá trên cây có khỏe không?<br>\
	M: Không hẳn. Lá trước đây rất xanh.<br>\
	Bây giờ, hầu hết đã chuyển sang màu nâu.<br>\
	W: Vâng, tôi nghĩ bụi hoa hồng của bà cần một ít phân bón.<br>\
	M: Được. Bà nghĩ tôi nên<br>\
	sử dụng loại phân bón nào?<br>\
	W: Loại phân bón dạng lỏng này rất tốt. Nó sẽ giúp<br>\
	làm cho lá hoa hồng của bà xanh trở lại. Sau đó,<br>\
	cây sẽ sớm ra hoa hồng.<br>\
	Loại phân bón này có giá khoảng mười đô la.<br>\
	M: Phải mất bao lâu để cây hoa hồng của tôi phục hồi?<br>\
	W: Tôi nghĩ là khoảng hai tuần.<br>\
	M: Tuyệt. Tôi sẽ dùng. Cảm ơn bà rất nhiều vì đã<br>\
	giúp đỡ.<br>\
	W: Không có gì!',
voca: ''
},
{
	en: '<b>Unit 4: Bird Watching</b><br>\
	B : I want to go bird watching tomorrow. Do you<br>\
	know a good area for birds?<br>\
	G : There is a quiet park near here. There are always<br>\
	many beautiful birds there. <br>\
	B : Will I be able to see different types of birds in<br>\
	this area?<br>\
	G : Yes, I think so. If you use binoculars, you can<br>\
	see the birds, even if they are far away.<br>\
	B : Great! I have a book about all the different types<br>\
	of birds.<br>\
	G : It seems as if you really like bird watching.<br>\
	B : Yes, I do! Would you like to come with me<br>\
	tomorrow?<br>\
	G : No, thank you. I think bird watching is boring.<br>\
	B : That’s not true! Birds are very interesting. Some<br>\
	birds have colorful feathers. Some birds sing<br>\
	beautiful songs. Some birds make special nests<br>\
	to lay eggs in.<br>\
	G : Really? Maybe I will go bird watching one day<br>\
	after all!',
	vi:
	'<b>Unit 4: Ngắm chim</b><br>\
	B: Ngày mai tôi muốn đi ngắm chim. Bạn<br>\
	có biết khu vực nào thích hợp để ngắm chim không?<br>\
	G: Có một công viên yên tĩnh gần đây. Luôn có<br>\
	nhiều loài chim đẹp ở đó.<br>\
	B: Tôi có thể nhìn thấy nhiều loài chim khác nhau ở<br>\
	khu vực này không?<br>\
	G: Có, tôi nghĩ là có. Nếu bạn sử dụng ống nhòm, bạn có thể<br>\
	nhìn thấy những chú chim, ngay cả khi chúng ở rất xa.<br>\
	B: Tuyệt! Tôi có một cuốn sách về tất cả các loài chim khác nhau.<br>\
	G: Có vẻ như bạn thực sự thích ngắm chim.<br>\
	B: Có, tôi thích! Bạn có muốn đi cùng tôi<br>\
	vào ngày mai không?<br>\
	G: Không, cảm ơn. Tôi nghĩ ngắm chim rất nhàm chán.<br>\
	B: Không đúng! Chim rất thú vị. Một số<br>\
	loài chim có bộ lông sặc sỡ. Một số loài chim hót<br>\
	những bài hát hay. Một số loài chim làm tổ đặc biệt<br>\
	để đẻ trứng.<br>\
	G: Thật sao? Có lẽ một ngày nào đó tôi sẽ đi ngắm chim<br>\
	sau tất cả!'
},
{
en:'<b>Unit 5: Trees in the Forest</b><br>\
	B : There are many forests in North America.<br>\
	There are many trees in these forests. Some of<br>\
	these trees are more than two hundred feet tall.<br>\
	Some are over five hundred years old. <br>\
	Several kinds of trees grow in these forests.<br>\
	Fir, cedar, and pine are three. These trees grow in<br>\
	different areas. Some grow in forests. Some grow<br>\
	on the mountains. People who lived in this place<br>\
	long ago used these trees to make things out of<br>\
	wood.<br>\
	Many of these trees are now in special areas.<br>\
	These areas are called forest reserves or national<br>\
	parks. <br>\
	Some parks charge a small entrance fee.<br>\
	Visitors must pay the fee to enter the parks.<br>\
	Then they can walk among the beautiful old<br>\
	trees. They must take care not to damage the<br>\
	trees. We should all take care of forests.'
,
vi:'<b>Unit 5: Cây trong rừng</b><br>\
B: Có nhiều khu rừng ở Bắc Mỹ.<br>\
Có nhiều cây trong những khu rừng này. Một số<br>\
cây này cao hơn hai trăm feet.<br>\
Một số cây đã hơn năm trăm năm tuổi.<br>\
Có một số loại cây mọc trong những khu rừng này.<br>\
Cây linh sam, cây tuyết tùng và cây thông là ba loại. Những loại cây này mọc ở<br>\
các khu vực khác nhau. Một số mọc trong rừng. Một số mọc<br>\
trên núi. Những người sống ở nơi này<br>\
từ lâu đã sử dụng những loại cây này để làm ra<br>\
gỗ.<br>\
Nhiều loại cây này hiện nằm ở những khu vực đặc biệt.<br>\
Những khu vực này được gọi là khu bảo tồn rừng hoặc công viên<br>\
quốc gia.<br>\
Một số công viên thu một khoản phí vào cửa nhỏ.<br>\
Du khách phải trả phí để vào công viên.<br>\
Sau đó, họ có thể đi bộ giữa những cây cổ thụ<br>\
tuyệt đẹp. Họ phải cẩn thận không làm hỏng<br>\
cây. Tất cả chúng ta nên chăm sóc rừng.'
}
,

{
en:'<b>Unit 6 An Easy Way to Shop</b><br> \
G : Hey, Steve. Look at my new MP3 player!<br> \
B : Wow! It looks cool! Where did you buy it?<br>\
G : I bought it online at an electronics website. <br>\
B : I’m not very good at using a computer. Is it hard<br>\
to buy things online?<br>\
G : It’s really easy. All you do is go to the website,<br>\
and choose the item you want to look at. There<br>\
are so many items to choose from on the website!<br>\
After you choose what you want to buy, you<br>\
click on the “check out” button. <br>\
B : That does seem easy!<br>\
G : Yes, it is. It only takes about a week for your<br>\
item to come. Of course, if you are in a hurry,<br>\
you can pay more to get it sent faster.<br>\
B : Do you pay for the item when it comes?<br>\
G : No, you have to pay for it online with a credit<br>\
card.',

vi: '<b>Unit 6: Một cách mua sắm dễ dàng</b><br>\
G: Này, Steve. Nhìn máy nghe nhạc MP3 mới của tôi này!<br>\
B: Chà! Trông tuyệt quá! Bạn mua ở đâu thế?<br>\
G: Tôi mua trực tuyến trên một trang web điện tử.<br>\
B: Tôi không giỏi sử dụng máy tính lắm. Mua hàng trực tuyến có khó không?<br>\
G: Thực sự dễ lắm. Bạn chỉ cần vào trang web<br>\
và chọn mặt hàng bạn muốn xem. Có<br>\
rất nhiều mặt hàng để lựa chọn trên trang web!<br>\
Sau khi chọn mặt hàng bạn muốn mua, bạn<br>\
nhấp vào nút "thanh toán".<br>\
B: Có vẻ dễ đấy!<br>\
G: Đúng vậy. Chỉ mất khoảng một tuần để mặt hàng của bạn<br>\
đến. Tất nhiên, nếu bạn đang vội,<br>\
bạn có thể trả thêm tiền để được gửi nhanh hơn.<br>\
B: Bạn có trả tiền khi nhận được mặt hàng không?<br>\
G: Không, bạn phải thanh toán trực tuyến bằng<br>\
thẻ tín dụng.'
}
,
{
en: '<b>Unit 7: Cell Phone Messages</b> <br> \
	W: I need to check my messages.<br>\
	M: How are you going to do that? We are in the<br> \
	middle of the freeway!<br>\
	W: I’m going to use my cell phone. Haven’t you<br> \
	ever done that?<br>\
	M: No. I just use my cell phone to talk to other<br> \
	people.<br>\
	W: Now you can also use a cell phone to send and<br> \
	receive short text messages. It’s very useful.<br>\
	M: How do you send a message that way?<br>\
	W: I just use the keys on the phone to type a short<br>\
	message. Then I press the “send” button. It’s<br>\
	cheaper than making a phone call.<br>\
	M: That’s a great idea! You can save both time and<br>\
	money that way. <br>\
	W: Right. All my friends usually send me text<br>\
	messages now. <br>\
	M: Thanks for telling me about this. I’ll have to try<br>\
	it!<br>\
	W: You’re welcome. I think you’ll find it useful.',
 vi:
'<b>Unit 7: Tin nhắn trên điện thoại di động </b> <br> \
W: Tôi cần kiểm tra tin nhắn của mình.<br>\
M: Bạn định làm thế nào? Chúng ta đang ở<br>\
giữa đường cao tốc!<br>\
W: Tôi sẽ sử dụng điện thoại di động của mình. Bạn chưa<br>\
bao giờ làm thế sao?<br>\
M: Không. Tôi chỉ sử dụng điện thoại di động của mình để nói chuyện với những<br>\
người khác.<br>\
W: Bây giờ bạn cũng có thể sử dụng điện thoại di động để gửi và<br>\
nhận tin nhắn văn bản ngắn. Rất hữu ích.<br>\
M: Bạn gửi tin nhắn theo cách đó như thế nào?<br>\
W: Tôi chỉ sử dụng các phím trên điện thoại để nhập một tin<br>\
tin ngắn. Sau đó, tôi nhấn nút *gửi*. Rẻ hơn là gọi điện thoại.<br>\
M: Đó là một ý tưởng tuyệt vời! Bạn có thể tiết kiệm cả thời gian và<br>\
tiền bạc theo cách đó.<br>\
W: Đúng vậy. Tất cả bạn bè của tôi hiện nay thường gửi tin nhắn văn bản<br>\
cho tôi.<br>\
M: Cảm ơn bạn đã cho tôi biết về điều này. Tôi sẽ phải thử!<br>\
W: Không có gì. Tôi nghĩ bạn sẽ thấy nó hữu ích.'
}

	   ];


    $scope.story = $scope.stories[$scope.storyIdx];

	$scope.fetchStory = function (index) {
		$scope.stopSound();
		$scope.storyIdx = index-1;
		$scope.story = $scope.stories[index-1];
	}

	$scope.resetAudioBtnUI = function()
	{
		$scope.bPause=false;
        $scope.bPlayingFull=false;
        if ($scope.isAudioLoop)
        {
        	$scope.playFullSound($scope.storyIdx);
        }
        $scope.$apply();
	}

	$scope.playFullSound = function (index) {
		if ($scope.bPlayingFull)
		{
			$scope.stopSound();
			$scope.bPause=false;
		}
	  	else
	  	{
	  		$scope.audio = new Audio($scope.storyIdx + '.mp3');
		    $scope.audio.loop = false;
		    $scope.audio.play();

 			$scope.audio.addEventListener("ended", function(){
			   $scope.resetAudioBtnUI();
			});

		    $scope.bPlayingFull = true;
	  	}
	}



	$scope.pauseSound = function () {
		if (!$scope.audio) return;
		$scope.bPause = !$scope.bPause;
		if ($scope.bPause)
	    {
	    	$scope.audio.pause();
	    	$scope.currentTime = $scope.audio.currentTime;
	    }
	    else
	    {
	    	$scope.audio.currentTime = $scope.currentTime;
	    	$scope.audio.play();
	    }
	}

	$scope.stopSound = function () {
		if (!$scope.audio) return;
		 $scope.audio.pause();
		 $scope.audio.currentTime = 0;
		 $scope.currentTime = 0;
		 $scope.bPlayingFull = false;
		 $scope.bPlayingSentence = false;
	};

	
    });

</script>
</html>
